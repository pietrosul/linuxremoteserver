<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remote Control Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="connection_check.js"></script>
</head>
<body>
    <div class="login-screen" id="login-screen">
        <div class="login-container">
            <h1>Acces la distanță</h1>
            <div class="form-group">
                <label for="server-address">Adresa serverului:</label>
                <input type="text" id="server-address" placeholder="ex: http://192.168.1.100:8080">
                <button id="check-connection" class="secondary-btn">Verifică conexiunea</button>
                <div id="connection-status" class="status-message"></div>
            </div>
            <div class="form-group">
                <label for="password">Parolă:</label>
                <input type="password" id="password">
            </div>
            <button id="login-btn" class="primary-btn">Conectare</button>
            <p id="login-message" class="error-message"></p>
            <div class="help-text">
                <p><i class="fas fa-info-circle"></i> Asigurați-vă că adresa include protocolul și portul (exemplu: http://192.168.1.100:8080)</p>
            </div>
        </div>
    </div>

    <div class="dashboard hidden" id="dashboard">
        <header>
            <h1>Control laptop de la distanță</h1>
            <div class="connection-info">
                <span id="connection-info">Conectat la: <span id="server-host">...</span></span>
                <button id="logout-btn" class="danger-btn"><i class="fas fa-sign-out-alt"></i> Deconectare</button>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="sidebar">
                <div class="system-info panel">
                    <h2><i class="fas fa-info-circle"></i> Informații sistem</h2>
                    <div id="system-info-content">
                        <p>Se încarcă...</p>
                    </div>
                </div>

                <div class="quick-actions panel">
                    <h2><i class="fas fa-bolt"></i> Acțiuni rapide</h2>
                    <button class="action-btn" data-command="ls -la"><i class="fas fa-list"></i> Listare fișiere</button>
                    <button class="action-btn" data-command="uptime"><i class="fas fa-clock"></i> Uptime</button>
                    <button class="action-btn" data-command="df -h"><i class="fas fa-hdd"></i> Spațiu disc</button>
                    <button class="action-btn" data-command="free -h"><i class="fas fa-memory"></i> Memorie</button>
                    <button class="action-btn" data-command="ps aux | head -10"><i class="fas fa-tasks"></i> Procese</button>
                    <button class="action-btn" data-command="ifconfig || ip a"><i class="fas fa-network-wired"></i> Rețea</button>
                    <button class="action-btn" data-command="cat /etc/os-release"><i class="fas fa-desktop"></i> Versiune OS</button>
                </div>

                <div class="system-control panel">
                    <h2><i class="fas fa-power-off"></i> Control sistem</h2>
                    <button class="danger-btn action-btn" data-command="systemctl poweroff"><i class="fas fa-power-off"></i> Shutdown</button>
                    <button class="warning-btn action-btn" data-command="systemctl reboot"><i class="fas fa-sync"></i> Restart</button>
                    <button class="warning-btn action-btn" data-command="systemctl suspend"><i class="fas fa-moon"></i> Suspendare</button>
                </div>
            </div>

            <div class="main-content">
                <div class="screen-panel panel">
                    <div class="screen-controls">
                        <h2><i class="fas fa-desktop"></i> Ecran</h2>
                        <div class="screen-buttons">
                            <button id="refresh-screen" class="primary-btn"><i class="fas fa-sync"></i> Reîmprospătare</button>
                            <button id="start-stream" class="success-btn"><i class="fas fa-play"></i> Stream Live</button>
                            <button id="stop-stream" class="warning-btn hidden"><i class="fas fa-stop"></i> Oprire stream</button>
                        </div>
                    </div>
                    <div class="screen-container">
                        <img id="screen" src="" alt="Ecran la distanță">
                        <div id="loading-overlay" class="hidden">
                            <div class="spinner"></div>
                            <p>Se încarcă...</p>
                        </div>
                    </div>
                </div>

                <div class="terminal-panel panel">
                    <h2><i class="fas fa-terminal"></i> Terminal</h2>
                    <div class="terminal-container">
                        <div id="terminal-output"></div>
                    </div>
                    <div class="terminal-input">
                        <input type="text" id="command-input" placeholder="Introdu o comandă...">
                        <button id="execute-command" class="primary-btn"><i class="fas fa-terminal"></i> Execută</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        document.getElementById('check-connection').addEventListener('click', async function() {
            const serverAddress = document.getElementById('server-address').value.trim();
            
            if (!serverAddress) {
                ConnectionCheck.displayConnectionCheck({
                    valid: false,
                    message: 'Introduceți adresa serverului'
                }, 'connection-status');
                return;
            }
            
            const statusElement = document.getElementById('connection-status');
            statusElement.innerHTML = '<span style="color: #3498db;">Se verifică conexiunea...</span>';
            
            const result = await ConnectionCheck.checkConnection(serverAddress);
            ConnectionCheck.displayConnectionCheck(result, 'connection-status');
            
            if (result.valid) {
                document.getElementById('login-btn').disabled = false;
            }
        });
    </script>
</body>
</html> 