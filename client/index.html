<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remote Access Tool</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <script src="connection_check.js"></script>
</head>
<body>
    <!-- Container pentru Login -->
    <div id="login-container">
        <div class="login-card">
            <div class="login-header">
                <h1 class="app-title">Remote Access</h1>
                <p class="app-subtitle">Control securizat de la distanță</p>
            </div>
            
            <div class="login-form">
                <div class="form-group">
                    <div class="input-group">
                        <i class="fas fa-server input-icon"></i>
                        <input type="text" id="server-address" placeholder="Adresa server (ex: http://192.168.1.100:8080)">
                    </div>
                    <div class="help-text">
                        <i class="fas fa-info-circle"></i>
                        Formatul corect include protocolul (http://) și portul (8080)
                    </div>
                </div>
                
                <div id="connection-status" class="status-message" style="display: none;"></div>
                <button id="check-connection" class="secondary-btn"><i class="fas fa-plug"></i> Verifică conexiunea</button>
                
                <div class="form-group">
                    <div class="input-group">
                        <i class="fas fa-lock input-icon"></i>
                        <input type="password" id="password" class="password-blur" placeholder="Parolă">
                        <button id="password-toggle" class="password-toggle" type="button">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                
                <div id="login-error" class="error-message"></div>
                
                <button id="login-btn" class="primary-btn" onclick="handleLogin()" disabled>Autentificare</button>
            </div>
        </div>
    </div>

    <!-- Container pentru Dashboard -->
    <div id="dashboard" style="display: none;">
        <div class="dashboard-header">
            <h2>Remote Access Dashboard</h2>
            <div class="connection-info">
                Conectat la: <span id="server-host">Unknown</span>
            </div>
        </div>
        
        <div class="dashboard-content">
            <div class="panel system-panel">
                <div class="panel-header">
                    <h3><i class="fas fa-info-circle"></i> Informații Sistem</h3>
                </div>
                <div id="system-info-container" class="panel-content">
                    <div id="system-info">
                        <p>Se încarcă informațiile sistemului...</p>
                    </div>
                    <!-- Container pentru informații despre tunelul ngrok -->
                    <div id="ngrok-info" style="display: none;"></div>
                </div>
            </div>
            
            <div class="panel screenshot-panel">
                <div class="panel-header">
                    <h3><i class="fas fa-desktop"></i> Captură Ecran</h3>
                </div>
                <div class="panel-content">
                    <div id="screenshot-container">
                        <div class="loading-message">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Se încarcă captura de ecran...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel terminal-panel">
                <div class="panel-header">
                    <h3><i class="fas fa-terminal"></i> Terminal</h3>
                    <div class="panel-actions">
                        <button id="network-btn" class="action-btn" onclick="executeCommand('ifconfig || ip a')">
                            <i class="fas fa-network-wired"></i> Rețea
                        </button>
                        <button id="processes-btn" class="action-btn" onclick="executeCommand('ps aux')">
                            <i class="fas fa-tasks"></i> Procese
                        </button>
                        <button id="clear-btn" class="action-btn" onclick="terminalOutput.innerHTML = ''">
                            <i class="fas fa-trash"></i> Șterge
                        </button>
                    </div>
                </div>
                <div class="panel-content">
                    <div id="terminal-output" class="terminal-output"></div>
                    <div class="terminal-input-container">
                        <span class="prompt">$</span>
                        <input type="text" id="command-input" placeholder="Introduce o comandă...">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="connection_check.js"></script>
    <script src="script.js"></script>
    <script>
        // Script pentru verificarea conexiunii
        document.getElementById('check-connection').addEventListener('click', async function() {
            const serverAddress = document.getElementById('server-address').value.trim();
            
            if (!serverAddress) {
                ConnectionCheck.displayConnectionCheck({
                    valid: false,
                    message: 'Introduceți adresa serverului'
                }, 'connection-status');
                return;
            }
            
            // Afișează starea de "verificare..."
            const statusElement = document.getElementById('connection-status');
            statusElement.innerHTML = '<span style="color: var(--primary);"><i class="fas fa-spinner fa-spin"></i> Se verifică conexiunea...</span>';
            
            // Verifică conexiunea
            const result = await ConnectionCheck.checkConnection(serverAddress);
            ConnectionCheck.displayConnectionCheck(result, 'connection-status');
            
            // Dacă conexiunea este validă, activează butonul de login
            if (result.valid) {
                document.getElementById('login-btn').disabled = false;
            }
        });
    </script>
</body>
</html> 